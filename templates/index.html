<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corvio - Générateur de programmes d'entraînement</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</head>
<body>
    <!-- Navigation Header -->
    {% include 'header.html' %}

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <h1 class="hero-title">Votre Programme d'Entraînement Personnalisé</h1>
            <p class="hero-subtitle">Entrez vos informations et obtenez un programme de fitness gratuit, alimenté par l'IA. Créez votre compte pour commencer !</p>
            <div class="hero-stats">
                <div class="stat-item">
                    <span class="stat-number">30+</span>
                    <span class="stat-label">Exercices</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">7</span>
                    <span class="stat-label">Jours</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">100%</span>
                    <span class="stat-label">Gratuit</span>
                </div>
            </div>
            <a href="#generator" class="btn btn-primary hero-btn" id="startNowBtn">
                <i class="fas fa-rocket"></i>
                Commencer maintenant
            </a>
        </div>
        <div class="hero-scroll-indicator">
            <i class="fas fa-chevron-down"></i>
        </div>
    </section>

    <main>
        {% if user %}
            <section class="welcome-section">
                <div class="welcome-card">
                    <h2>Bienvenue, {{ user.name }} !</h2>
                    <p>Connecté pour sauvegarder vos programmes d'entraînement et suivre vos progrès.</p>
                    <div class="welcome-actions">
                        <a href="{{ url_for('workout_plan') }}" class="btn btn-primary">
                            <i class="fas fa-dumbbell"></i>
                            Voir mon programme
                        </a>
                    </div>
                </div>
            </section>
        {% endif %}

        <!-- Generator/Form Section -->
        <section class="form-section" id="generator">
            {% if user %}
                <div class="section-header">
                    <h2><i class="fas fa-user-cog"></i> Informations Personnelles</h2>
                    <p>Remplissez ces informations pour obtenir un programme personnalisé</p>
                </div>
            {% else %}
                <div class="section-header">
                    <h2><i class="fas fa-lock"></i> Connexion Requise</h2>
                    <p>Vous devez être connecté pour générer un programme d'entraînement personnalisé</p>
                </div>
                <div class="login-required-section">
                    <div class="login-required-card">
                        <i class="fas fa-user-lock"></i>
                        <h3>Connectez-vous pour commencer</h3>
                        <p>Créez votre compte ou connectez-vous pour accéder au générateur de programmes d'entraînement personnalisés.</p>
                        <a href="{{ url_for('login') }}" class="btn btn-primary btn-large">
                            <i class="fas fa-sign-in-alt"></i>
                            Se connecter
                        </a>
                    </div>
                </div>
            {% endif %}
            {% if user %}
            <form id="infoForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="age">
                            <i class="fas fa-birthday-cake"></i>
                            Âge (années) :
                        </label>
                        <input type="number" id="age" name="age" min="1" max="120" required placeholder="Ex: 25">
                    </div>
                    <div class="form-group">
                        <label for="height">
                            <i class="fas fa-ruler-vertical"></i>
                            Taille (cm) :
                        </label>
                        <input type="number" id="height" name="height" min="50" max="250" required placeholder="Ex: 175">
                    </div>
                    <div class="form-group">
                        <label for="weight">
                            <i class="fas fa-weight"></i>
                            Poids (kg) :
                        </label>
                        <input type="number" id="weight" name="weight" min="20" max="250" required placeholder="Ex: 70">
                    </div>
                    <div class="form-group">
                        <label for="difficulty">
                            <i class="fas fa-signal"></i>
                            Niveau de difficulté :
                        </label>
                        <select id="difficulty" name="difficulty" required>
                            <option value="beginner">Débutant</option>
                            <option value="intermediate" selected>Intermédiaire</option>
                            <option value="advanced">Avancé</option>
                        </select>
                    </div>
                </div>

                <!-- Paramètres optionnels -->
                <div class="form-grid">
                    <div class="form-group">
                        <label for="maxSessionDuration">
                            <i class="fas fa-clock"></i>
                            Durée max. par session (minutes) :
                        </label>
                        <input type="number" id="maxSessionDuration" name="maxSessionDuration" min="15" max="180" placeholder="Ex: 60 (optionnel)">
                    </div>
                    <div class="form-group">
                        <label for="maxWorkoutDays">
                            <i class="fas fa-calendar-week"></i>
                            Jours max. d'entraînement par semaine :
                        </label>
                        <input type="number" id="maxWorkoutDays" name="maxWorkoutDays" min="1" max="7" placeholder="Ex: 5 (optionnel)">
                    </div>
                </div>

                <!-- Gym question -->
                <fieldset class="gym-fieldset">
                    <legend><i class="fas fa-dumbbell"></i> Vous entraînez-vous en salle de sport ?</legend>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="gym" value="yes" id="gymYes" checked>
                            <span class="radio-custom"></span>
                            <i class="fas fa-building"></i>
                            Oui, j'ai accès à une salle
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="gym" value="no" id="gymNo">
                            <span class="radio-custom"></span>
                            <i class="fas fa-home"></i>
                            Non, je m'entraîne à domicile
                        </label>
                    </div>
                </fieldset>

                <!-- Equipment options if not in gym -->
                <div id="equipmentOptions" class="equipment-options">
                    <h4><i class="fas fa-tools"></i> Sélectionnez les équipements que vous avez :</h4>
                    <div class="equipment-grid">
                        <label class="equipment-option">
                            <input type="checkbox" name="equipmentList" value="dumbbells">
                            <span class="equipment-icon"><i class="fas fa-dumbbell"></i></span>
                            <span class="equipment-name">Haltères</span>
                        </label>
                        <label class="equipment-option">
                            <input type="checkbox" name="equipmentList" value="pull-up bar">
                            <span class="equipment-icon"><i class="fas fa-grip-lines"></i></span>
                            <span class="equipment-name">Barre de traction</span>
                        </label>
                        <label class="equipment-option">
                            <input type="checkbox" name="equipmentList" value="resistance bands">
                            <span class="equipment-icon"><i class="fas fa-expand-arrows-alt"></i></span>
                            <span class="equipment-name">Bandes de résistance</span>
                        </label>
                        <label class="equipment-option">
                            <input type="checkbox" name="equipmentList" value="kettlebell">
                            <span class="equipment-icon"><i class="fas fa-circle"></i></span>
                            <span class="equipment-name">Kettlebell</span>
                        </label>
                        <label class="equipment-option">
                            <input type="checkbox" name="equipmentList" value="jump rope">
                            <span class="equipment-icon"><i class="fas fa-circle-notch"></i></span>
                            <span class="equipment-name">Corde à sauter</span>
                        </label>
                        <label class="equipment-option">
                            <input type="checkbox" name="equipmentList" value="mat">
                            <span class="equipment-icon"><i class="fas fa-square"></i></span>
                            <span class="equipment-name">Tapis</span>
                        </label>
                    </div>
                </div>

                <button type="submit" id="generateBtn" class="btn btn-primary btn-large">
                    <i class="fas fa-magic"></i>
                    Générer le Programme
                </button>
                <div class="loading-spinner" id="loadingSpinner"></div>
            </form>
            {% endif %}
        </section>

        <!-- Results Section -->
        <section id="resultSection" class="result-section">
            <div class="section-header">
                <h2><i class="fas fa-calendar-check"></i> Votre Programme Personnalisé</h2>
                <p>Voici votre programme d'entraînement sur 7 jours, adapté à vos besoins</p>
            </div>
            <div id="programContainer" class="workout-plan-container"></div>
            
            <div class="plan-actions">
                <button class="btn btn-secondary" id="printPlanBtn">
                    <i class="fas fa-print"></i>
                    Imprimer le plan
                </button>
                <button class="btn btn-success" id="savePlanBtn">
                    <i class="fas fa-save"></i>
                    Sauvegarder
                </button>
                <button class="btn btn-primary" id="sharePlanBtn">
                    <i class="fas fa-share"></i>
                    Partager
                </button>
            </div>
            
            <div class="products-section">
                <h3><i class="fas fa-shopping-cart"></i> Produits Recommandés</h3>
                <p>Ces équipements peuvent vous aider dans votre entraînement</p>
                <div id="productList" class="products-grid"></div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-main">
                <div class="footer-brand">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Corvio" class="footer-logo">
                    <h3>Corvio</h3>
                    <p>Votre partenaire fitness intelligent pour des programmes d'entraînement personnalisés.</p>
                </div>
                
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Navigation</h4>
                        <a href="{{ url_for('index') }}">Accueil</a>
                        <a href="{{ url_for('index') }}#generator">Générateur</a>
                        <a href="{{ url_for('about') }}">À propos</a>
                        <a href="{{ url_for('contact') }}">Contact</a>
                    </div>
                    
                                         <div class="footer-column">
                         <h4>Support</h4>
                         <a href="{{ url_for('privacy') }}">Confidentialité</a>
                         <a href="{{ url_for('legal') }}">Mentions légales</a>
                         <a href="{{ url_for('terms') }}">Conditions d'utilisation</a>
                         <a href="{{ url_for('contact') }}">Contact</a>
                     </div>
                    
                    <div class="footer-column">
                        <h4>Fonctionnalités</h4>
                        <a href="#generator">Programmes personnalisés</a>
                        <a href="#generator">IA intégrée</a>
                        <a href="#generator">Sauvegarde cloud</a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-social">
                    <a href="#" aria-label="Twitter" class="social-icon">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" aria-label="Instagram" class="social-icon">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" aria-label="GitHub" class="social-icon">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="#" aria-label="LinkedIn" class="social-icon">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </div>
                <p>&copy; 2025 Corvio. Tous droits réservés. Propulsé par l'IA.</p>
            </div>
        </div>
    </footer>

    <script>
        // Smooth scroll for hero button
        document.getElementById('startNowBtn').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('generator').scrollIntoView({ behavior: 'smooth' });
        });

        // Scroll indicator functionality
        document.querySelector('.hero-scroll-indicator').addEventListener('click', function() {
            document.getElementById('generator').scrollIntoView({ behavior: 'smooth' });
        });

        // Plan actions functionality
        document.addEventListener('click', function(e) {
            if (e.target.id === 'printPlanBtn') {
                window.print();
            }
            
            if (e.target.id === 'savePlanBtn') {
                // Save functionality - could be enhanced with localStorage or API
                alert('Fonctionnalité de sauvegarde à implémenter');
            }
            
            if (e.target.id === 'sharePlanBtn') {
                // Share functionality
                if (navigator.share) {
                    navigator.share({
                        title: 'Mon programme d\'entraînement Corvio',
                        text: 'Découvrez mon programme d\'entraînement personnalisé généré par Corvio !',
                        url: window.location.href
                    });
                } else {
                    // Fallback: copy to clipboard
                    navigator.clipboard.writeText(window.location.href).then(() => {
                        alert('Lien copié dans le presse-papiers !');
                    });
                }
            }
        });
    </script>
</body>
</html>